module testCodegen

language yacc



test one rule [[
  %%
  name : tok;
]] run generate-sdf3-trimmed to
  "module test

imports
  test-lex

context-free start-symbols

  Name

context-free syntax

  Name.Name = Tok
"

test one rule, empty rhs [[
  %%
  name : ;
]] run generate-sdf3-trimmed to
  "module test

imports
  test-lex

context-free start-symbols

  Name

context-free syntax

  Name.Name = \"\"
"

test one rule, two rhs [[
  %%
  name : a | b;
]] run generate-sdf3-trimmed to
  "module test

imports
  test-lex

context-free start-symbols

  Name

context-free syntax

  Name.Name1 = A
  Name.Name2 = B
"

test one start token [[
  %start tok
  %token tok
  %%
  name : tok;
]] run generate-sdf3-trimmed to
  "module test

imports
  test-lex

context-free start-symbols

  Tok

context-free syntax

  Name.Name = Tok
"


test error rule [[
  %%
  name : tok | error lf ;
]] run generate-sdf3-trimmed to
  "module test

imports
  test-lex

context-free start-symbols

  Name

context-free syntax

  Name.Name = Tok
"
